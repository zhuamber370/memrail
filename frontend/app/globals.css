:root {
  --bg: #f1efe8;
  --ink: #121212;
  --ink-soft: #4f4b45;
  --muted: #58544f;
  --line: #1d1b19;
  --panel: #faf8f3;
  --accent: #b5462f;
  --success: #157347;
  --warn: #c58100;
  --danger: #9a1f1f;
  --focus: #2457d6;
  --radius: 14px;
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
  color: var(--ink);
  background:
    radial-gradient(circle at 20% 20%, #ffffffa8 0, transparent 42%),
    radial-gradient(circle at 80% 10%, #e9dcc9 0, transparent 45%),
    var(--bg);
  font-family: "IBM Plex Sans", "Avenir Next", "Segoe UI", sans-serif;
}

a {
  color: inherit;
  text-decoration: none;
}

.shell {
  display: grid;
  grid-template-columns: 240px 1fr;
  min-height: 100vh;
}

.rail {
  border-right: 2px solid var(--line);
  padding: 20px 14px;
  background: linear-gradient(180deg, #f6f2e9 0%, #e9e3d8 100%);
}

.brand {
  font-family: "IBM Plex Mono", "Courier New", monospace;
  letter-spacing: 0.08em;
  font-weight: 700;
  margin-bottom: 18px;
}

.navLink {
  display: block;
  border: 2px solid var(--line);
  padding: 10px 12px;
  margin-bottom: 10px;
  border-radius: 10px;
  background: #fff8ef;
}

.navLink:hover,
.navLink:focus-visible {
  outline: none;
  border-color: var(--focus);
  transform: translateX(2px);
  transition: 120ms ease;
}

.main {
  padding: 24px;
}

.card {
  background: var(--panel);
  border: 2px solid var(--line);
  border-radius: var(--radius);
  padding: 18px;
  box-shadow: 4px 4px 0 #1b1b1b25;
}

.h1 {
  margin: 0 0 10px;
  font-size: clamp(1.4rem, 2.2vw, 2rem);
  line-height: 1.1;
}

.meta {
  color: var(--muted);
  font-size: 0.92rem;
}

.badges {
  display: flex;
  gap: 10px;
  margin-top: 12px;
  flex-wrap: wrap;
}

.badge {
  border: 2px solid var(--line);
  border-radius: 999px;
  padding: 4px 10px;
  background: #fff;
  font-size: 0.85rem;
}

.changesBlock {
  margin-top: 14px;
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fffdf8;
  padding: 12px;
}

.changesSubTitle {
  margin: 6px 0 10px;
  font-size: 1rem;
  letter-spacing: 0.02em;
}

.changesGroupTitle {
  margin: 10px 0 8px;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--muted);
}

.changesSummaryGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
  gap: 8px;
}

.changesSummaryCard {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  padding: 8px 10px;
}

.changesSummaryKey {
  color: var(--muted);
  font-size: 0.8rem;
  line-height: 1.1;
  word-break: break-word;
}

.changesSummaryValue {
  margin-top: 4px;
  font-weight: 700;
}

.changesSummaryRawKey {
  margin-top: 2px;
  color: var(--muted);
  font-size: 0.74rem;
  font-family: "IBM Plex Mono", "Courier New", monospace;
}

.changesLedger {
  display: grid;
  gap: 8px;
}

.changesToggle {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin: 2px 0 10px;
  font-size: 0.86rem;
}

.changesLedgerItem {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  padding: 10px;
}

.changesLedgerHead {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.changesChip {
  border: 2px solid var(--line);
  border-radius: 999px;
  padding: 2px 8px;
  font-size: 0.78rem;
}

.changesChipEntity {
  background: #f0f7ff;
}

.changesChipAction {
  background: #fff2df;
}

.changesLedgerText {
  margin: 8px 0 0;
  font-family: "IBM Plex Mono", "Courier New", monospace;
  font-size: 0.86rem;
}

.changesFieldRow {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  margin-top: 8px;
}

.changesFieldChip {
  border: 1px dashed var(--line);
  border-radius: 8px;
  background: #fafafa;
  padding: 1px 6px;
  font-size: 0.76rem;
}

.changesLedgerFallback {
  border: 2px dashed var(--line);
  border-radius: 10px;
  padding: 8px 10px;
  background: #fff;
}

.changesResult {
  margin-top: 12px;
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 12px;
}

.changesResultCommit {
  box-shadow: inset 0 0 0 2px #15734733;
}

.changesResultUndo {
  box-shadow: inset 0 0 0 2px #c5810033;
}

.changesResultGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 10px;
}

.changesInboxLayout {
  margin-top: 12px;
  display: grid;
  grid-template-columns: 320px 1fr;
  gap: 12px;
}

.changesInboxList {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 10px;
  max-height: 76vh;
  overflow: auto;
}

.changesInboxItem {
  width: 100%;
  margin-top: 8px;
  text-align: left;
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fffdf8;
  padding: 8px;
}

.changesInboxItemActive {
  box-shadow: inset 0 0 0 2px #15734733;
  border-color: #157347;
}

.changesInboxHead {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.changesInboxMeta {
  margin-top: 8px;
  display: grid;
  gap: 4px;
  font-size: 0.8rem;
  color: var(--muted);
}

.changesInboxDetail {
  display: grid;
  gap: 10px;
}

.auditFilterGrid {
  margin-top: 10px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 8px;
}

.auditList {
  margin-top: 12px;
  display: grid;
  gap: 8px;
}

.auditItem {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 10px;
}

.auditItemHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.auditItemGrid {
  margin-top: 8px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 10px;
}

.auditMeta {
  margin-top: 8px;
}

.auditMeta summary {
  cursor: pointer;
  font-size: 0.84rem;
  color: var(--muted);
}

.auditMeta pre {
  margin: 8px 0 0;
  border: 1px dashed var(--line);
  border-radius: 8px;
  background: #fbfbfb;
  padding: 8px;
  overflow-x: auto;
  font-size: 0.76rem;
  font-family: "IBM Plex Mono", "Courier New", monospace;
}

.taskBoard {
  display: grid;
  gap: 12px;
}

.taskBoardV2 {
  background:
    radial-gradient(1200px 280px at 12% -20%, #d8f0ff 0%, transparent 65%),
    radial-gradient(900px 260px at 92% -12%, #ffe9d2 0%, transparent 70%);
}

.taskHero {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  align-items: flex-start;
}

.taskHeroStat {
  display: flex;
  align-items: center;
  gap: 10px;
  border: 2px solid var(--line);
  border-radius: 12px;
  padding: 8px 10px;
  background: #fff;
}

.taskFilterPanel {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 10px;
  display: grid;
  gap: 10px;
}

.taskFilterGrid {
  display: grid;
  grid-template-columns: repeat(3, minmax(140px, 1fr));
  gap: 10px;
}

.taskFilterItem {
  display: grid;
  gap: 6px;
  color: var(--ink-soft);
  font-size: 0.86rem;
}

.taskViewTabs {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.taskViewTabActive {
  background: #f0f7ff;
  border-color: var(--focus);
}

.taskLayout {
  display: grid;
  grid-template-columns: 1.2fr 0.8fr;
  gap: 12px;
}

.taskLayoutV2 {
  align-items: start;
}

.taskCreateRow {
  display: grid;
  grid-template-columns: minmax(220px, 1fr) repeat(3, minmax(110px, 140px)) auto auto;
  gap: 8px;
}

.taskCreateRowV2 {
  grid-template-columns: minmax(220px, 1fr) minmax(150px, 220px) repeat(2, minmax(100px, 130px)) auto;
}

.taskInput {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  padding: 6px 9px;
}

.taskBulkBar {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
  align-items: center;
}

.taskList {
  margin-top: 12px;
  display: grid;
  gap: 8px;
}

.taskListV2 {
  margin-top: 10px;
}

.taskTopicGroup {
  display: grid;
  gap: 8px;
}

.taskTopicHeader {
  font-size: 0.8rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  color: #35507c;
  text-transform: uppercase;
}

.taskRow {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  padding: 10px;
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 8px;
  align-items: center;
  cursor: pointer;
}

.taskRowActive {
  box-shadow: inset 0 0 0 2px #2457d650;
}

.taskRowMain {
  min-width: 0;
}

.taskTitle {
  font-weight: 700;
  line-height: 1.2;
}

.taskMetaLine {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  color: var(--ink-soft);
  font-size: 0.8rem;
}

.taskQuickActions {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.taskDetail {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fffdf8;
  padding: 12px;
  height: fit-content;
}

.taskDetailV2 {
  position: sticky;
  top: 8px;
}

.taskDetailContent {
  display: grid;
  gap: 8px;
}

.taskDetailTitle {
  font-size: 1.02rem;
  font-weight: 700;
}

.taskDetailGrid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.taskDetailEdit {
  border-top: 2px dashed var(--line);
  padding-top: 8px;
}

.taskDetailForm {
  display: grid;
  gap: 10px;
}

.taskEditSection {
  display: grid;
  gap: 8px;
}

.taskSectionTitle {
  margin: 0;
  font-size: 0.76rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #385572;
}

.taskField {
  display: grid;
  gap: 4px;
  font-size: 0.82rem;
  color: var(--ink-soft);
}

.taskFieldWide {
  grid-column: 1 / -1;
}

.taskDetailFormGrid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.taskTextArea {
  resize: vertical;
  min-height: 76px;
}

.taskAdvancedBox {
  border: 2px dashed var(--line);
  border-radius: 10px;
  background: #fff;
}

.taskAdvancedBox > summary {
  cursor: pointer;
  padding: 8px 10px;
  font-size: 0.82rem;
  font-weight: 700;
  color: var(--ink-soft);
}

.taskAdvancedContent {
  padding: 0 10px 10px;
  display: grid;
  gap: 10px;
}

.taskDetailFormActions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  flex-wrap: wrap;
}

.taskDetailEditRow {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: center;
}

.taskBoardV3 {
  display: grid;
  gap: 10px;
  background:
    radial-gradient(760px 220px at 5% -15%, #ddecff 0%, transparent 64%),
    radial-gradient(920px 220px at 102% -20%, #ffe6cf 0%, transparent 66%),
    var(--panel);
}

.taskCommandTop {
  display: flex;
  justify-content: space-between;
  gap: 14px;
  align-items: flex-start;
}

.taskCommandCreateBar {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 10px;
  display: grid;
  grid-template-columns: minmax(220px, 1.3fr) minmax(140px, 0.8fr) 100px 140px auto auto;
  gap: 8px;
}

.taskCommandLayout {
  display: grid;
  grid-template-columns: 280px minmax(360px, 0.9fr) minmax(520px, 1.1fr);
  gap: 10px;
  align-items: start;
}

.taskCommandLayoutManage {
  grid-template-columns: 300px minmax(620px, 1fr);
}

.taskFilterPanelCommand {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 10px;
  display: grid;
  gap: 8px;
  position: sticky;
  top: 8px;
  min-width: 0;
}

.taskFilterSearch {
  border: 2px dashed var(--line);
  border-radius: 10px;
  background: #fffdf7;
  padding: 8px;
}

.taskFilterPanelCommand .taskFilterGrid {
  grid-template-columns: 1fr;
}

.taskFilterPanelCommand .taskInput {
  width: 100%;
  max-width: 100%;
}

.taskCommandListPanel {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 10px;
  display: grid;
  gap: 8px;
  min-width: 0;
}

.taskCommandListHead {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  align-items: center;
}

.taskStatusGroupList {
  display: grid;
  gap: 8px;
  max-height: 74vh;
  overflow: auto;
  padding-right: 2px;
}

.taskStatusGroup {
  border: 2px dashed var(--line);
  border-radius: 12px;
  background: #fffdf8;
  padding: 8px;
  display: grid;
  gap: 8px;
}

.taskStatusGroupHead {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  align-items: center;
}

.taskListV3 {
  margin-top: 0;
  max-height: none;
  overflow: visible;
}

.taskCommandDetail {
  position: sticky;
  top: 8px;
  max-height: 90vh;
  overflow: auto;
  min-width: 0;
}

.taskStudioPanel {
  border: 2px solid var(--line);
  border-radius: 14px;
  background: #fff;
  padding: 10px;
  display: grid;
  gap: 10px;
}

.taskStudioHead {
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 10px;
  align-items: start;
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fffdf7;
  padding: 10px;
}

.taskStudioHeadMain {
  min-width: 0;
}

.taskStudioHeadMain .changesSubTitle {
  margin: 0;
}

.taskStudioHeadMain .meta {
  margin-top: 4px;
}

.taskStudioHeadActions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.taskStudioWorkspace {
  display: grid;
  gap: 10px;
  min-height: 0;
  overflow: visible;
}

.taskStudioDrawerMask {
  border: 0;
  padding: 0;
  background: #0000001f;
  cursor: pointer;
  position: absolute;
  inset: 0;
  z-index: 14;
}

.taskStudioDrawer {
  position: absolute;
  top: 0;
  right: 0;
  width: min(460px, 96%);
  height: 100%;
  border-left: 2px solid var(--line);
  background: #fffdfb;
  box-shadow: -8px 0 22px #00000018;
  transform: translateX(calc(100% + 40px));
  transition: transform 180ms ease, opacity 140ms ease, visibility 0ms linear 180ms;
  z-index: 15;
  pointer-events: none;
  opacity: 0;
  visibility: hidden;
  display: grid;
}

.taskStudioDrawerOpen {
  transform: translateX(0);
  pointer-events: auto;
  opacity: 1;
  visibility: visible;
  transition: transform 180ms ease, opacity 140ms ease;
}

.taskStudioDrawerInline {
  position: static;
  width: 100%;
  height: auto;
  border: 2px solid var(--line);
  border-radius: 12px;
  box-shadow: none;
  transform: none;
  transition: none;
  z-index: auto;
  pointer-events: auto;
  opacity: 1;
  visibility: visible;
}

.taskStudioDrawerInline .taskStudioDrawerBody {
  height: auto;
  overflow: visible;
}

.taskStudioDrawerInline .taskStudioDrawerHead {
  position: static;
  border-bottom: 2px dashed var(--line);
}

.taskStudioDrawerBody {
  display: grid;
  gap: 10px;
  align-content: start;
  height: 100%;
  overflow: auto;
  padding: 10px;
}

.taskStudioDrawerHead {
  position: sticky;
  top: 0;
  background: #fffdfb;
  border-bottom: 2px solid #00000010;
  padding-bottom: 6px;
  display: flex;
  justify-content: space-between;
  gap: 8px;
  align-items: center;
  z-index: 1;
}

.taskStudioDrawerHead .changesSubTitle {
  margin: 0;
}

.taskStudioDetailForm {
  display: grid;
  gap: 10px;
}

.taskStudioSection {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  padding: 8px;
  display: grid;
  gap: 8px;
}

.taskStudioSectionTitle {
  margin: 0;
  font-size: 0.78rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #35507c;
}

.taskStudioGrid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

.taskArchivedHint {
  margin: 2px 0 0;
}

.taskErrorText {
  color: var(--danger);
  margin: 0;
}

.taskNoticeText {
  color: var(--success);
  margin: 0;
}

.taskExecPanel {
  border: 2px solid var(--line);
  border-radius: 12px;
  background:
    radial-gradient(680px 140px at 0% -20%, #edf7ff 0%, transparent 65%),
    #fff;
  padding: 10px;
  display: grid;
  gap: 10px;
}

.taskExecPanelV3 {
  background:
    radial-gradient(880px 200px at 0% -28%, #e9f3ff 0%, transparent 66%),
    #fff;
}

.taskExecStatusLine {
  margin: 0;
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fffdf7;
  padding: 8px 10px;
  font-size: 0.88rem;
}

.taskExecNodeStatusBar {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  padding: 8px;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: center;
}

.taskExecNodeStatusMain {
  display: grid;
  grid-template-columns: 1fr minmax(160px, 220px);
  gap: 8px;
  align-items: center;
}

.taskExecNodeStatusSelect {
  width: 100%;
  margin: 0;
}

.taskExecNodeActions {
  display: flex;
  gap: 6px;
  justify-content: flex-end;
  flex-wrap: wrap;
}

.taskExecDagCard {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 8px;
  display: grid;
  gap: 8px;
}

.taskDagLegend {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.taskDagLegendItem {
  border: 2px solid var(--line);
  border-radius: 999px;
  font-size: 0.76rem;
  line-height: 1;
  padding: 3px 8px;
  background: #fff;
}

.taskDagLegendExecute {
  border-color: #2457d6;
  box-shadow: inset 0 0 0 2px #2457d629;
}

.taskDagLegendWaiting {
  border-color: #c58100;
  box-shadow: inset 0 0 0 2px #c5810029;
}

.taskDagLegendDone {
  border-color: #157347;
  box-shadow: inset 0 0 0 2px #15734729;
}

.taskDagLegendRemoved {
  border-color: #8d8d8d;
  box-shadow: inset 0 0 0 2px #8d8d8d29;
}

.taskDagViewport {
  border: 2px solid var(--line);
  border-radius: 10px;
  background:
    linear-gradient(transparent 95%, #00000012 95%) 0 0 / 100% 30px repeat-y,
    linear-gradient(90deg, transparent 95%, #00000010 95%) 0 0 / 30px 100% repeat-x,
    #fffdf8;
  min-height: 440px;
  max-height: 560px;
  overflow: auto;
}

.taskDagCanvas {
  position: relative;
}

.taskDagEdges {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.taskDagEdge {
  fill: none;
  stroke-width: 2;
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke: #b98a2b;
  stroke-dasharray: 6 4;
  opacity: 0.95;
}

.taskDagEdgeExecute {
  stroke: #2457d6;
  stroke-width: 2.8;
  stroke-dasharray: none;
}

.taskDagEdgeDone {
  stroke: #157347;
  stroke-dasharray: none;
}

.taskDagEdgeRemoved {
  stroke: #8d8d8d;
  stroke-dasharray: 4 4;
  opacity: 0.7;
}

.taskDagEdgeWaiting {
  stroke: #c58100;
}

.taskDagEdgeLabel {
  fill: #1f3658;
  font-size: 11px;
  font-weight: 700;
  paint-order: stroke;
  stroke: #fffdf8;
  stroke-width: 3px;
  pointer-events: none;
}

.taskDagComposerHint {
  margin: 0;
}

.taskDagNode {
  position: absolute;
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  text-align: left;
  color: inherit;
  padding: 8px;
  cursor: pointer;
  display: grid;
  align-content: space-between;
  gap: 8px;
  overflow: visible;
}

.taskDagNodeStart {
  background: #f4f8ff;
}

.taskDagNodeExecute {
  border-color: #2457d6;
  box-shadow: inset 0 0 0 2px #2457d636;
}

.taskDagNodeDone {
  border-color: #157347;
  box-shadow: inset 0 0 0 2px #1573472f;
}

.taskDagNodeWaiting {
  border-color: #c58100;
  box-shadow: inset 0 0 0 2px #c5810029;
}

.taskDagNodeRemoved {
  border-color: #8d8d8d;
  background: #f4f4f4;
  opacity: 0.78;
}

.taskDagNodeSelected {
  box-shadow:
    inset 0 0 0 2px #2457d64f,
    0 0 0 2px #2457d626;
}

.taskDagNode:focus-visible {
  outline: 2px solid #2457d666;
  outline-offset: 2px;
}

.taskDagNodeTitle {
  margin-right: 26px;
  font-weight: 700;
  font-size: 0.88rem;
  line-height: 1.2;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.taskDagNodeMeta {
  display: flex;
  flex-wrap: wrap;
  gap: 4px 8px;
  font-size: 0.72rem;
  color: var(--muted);
}

.taskDagNodeMenuTrigger {
  position: absolute;
  top: 6px;
  right: 6px;
  border: 1px solid #1f36582b;
  border-radius: 999px;
  background: #fff;
  color: inherit;
  font-size: 0.72rem;
  font-weight: 700;
  line-height: 1;
  padding: 3px 7px;
  cursor: pointer;
}

.taskDagInlinePanel {
  position: absolute;
  z-index: 3;
  width: 304px;
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  padding: 8px;
  display: grid;
  gap: 8px;
  box-shadow: 0 8px 20px #00000012;
}

.taskDagInlineMenu {
  display: grid;
  gap: 6px;
}

.taskDagInlineMenuBtn {
  border: 2px solid var(--line);
  border-radius: 8px;
  background: #fffdf8;
  color: inherit;
  text-align: left;
  padding: 6px 8px;
  cursor: pointer;
}

.taskDagInlineEditor {
  display: grid;
  gap: 8px;
}

.taskDagInlineEditor .taskSectionTitle {
  margin: 0;
}

.taskDagInlineForm {
  display: grid;
  gap: 8px;
}

.taskDagInlineActions {
  display: flex;
  gap: 6px;
  justify-content: flex-end;
  flex-wrap: wrap;
}

.taskExecFlowBar {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  align-items: flex-end;
}

.taskExecStartBox {
  border: 2px dashed var(--line);
  border-radius: 10px;
  background: #fffdf8;
  padding: 10px;
  display: grid;
  gap: 8px;
}

.taskExecStartRow {
  display: grid;
  grid-template-columns: minmax(140px, 190px) 1fr auto;
  gap: 8px;
}

.taskStageBar {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  padding: 10px;
  display: grid;
  gap: 8px;
}

.taskStagePoint {
  border: 2px solid var(--line);
  border-radius: 999px;
  padding: 4px 9px;
  background: #fff;
  font-size: 0.78rem;
  line-height: 1;
  color: inherit;
  cursor: pointer;
}

.taskStageStart {
  background: #f2f7ff;
}

.taskStagePointActive {
  border-color: var(--focus);
  box-shadow: inset 0 0 0 2px #2457d633;
}

.taskStagePointDone {
  border-color: var(--success);
  box-shadow: inset 0 0 0 2px #15734733;
}

.taskStagePointRemoved {
  border-color: #8d8d8d;
  background: #f3f3f3;
  opacity: 0.75;
}

.taskBranchGraph {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
  gap: 8px;
}

.taskBranchColumn {
  border: 2px dashed var(--line);
  border-radius: 10px;
  background: #fffdf8;
  padding: 8px;
}

.taskBranchColumnLabel {
  font-size: 0.72rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #35507c;
  font-weight: 700;
}

.taskBranchColumnBody {
  margin-top: 6px;
  display: grid;
  gap: 6px;
}

.taskBranchNode {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  color: inherit;
  text-align: left;
  padding: 8px;
  cursor: pointer;
}

.taskBranchNodeTitle {
  font-weight: 700;
  line-height: 1.2;
}

.taskBranchNodeParent {
  margin-top: 5px;
  color: var(--muted);
  font-size: 0.76rem;
}

.taskExecCurrentGoal {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fffdf8;
  padding: 10px;
  display: grid;
  gap: 8px;
}

.taskExecIdeas {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  padding: 10px;
  display: grid;
  gap: 8px;
}

.taskExecIdeaList {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 8px;
}

.taskExecIdeaCard {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fffdf8;
  text-align: left;
  color: inherit;
  padding: 8px;
  cursor: pointer;
}

.taskExecIdeaCardExecute {
  border-color: #2457d6;
  background: #eef4ff;
}

.taskExecIdeaCardDone {
  border-color: #157347;
  background: #edf8f1;
}

.taskExecIdeaCardRemoved {
  border-color: #8b8b8b;
  background: #f4f4f4;
  opacity: 0.75;
}

.taskExecCreateStep {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  padding: 10px;
  display: grid;
  gap: 8px;
}

.taskExecCreateGrid {
  display: grid;
  grid-template-columns: minmax(120px, 160px) minmax(180px, 1fr) minmax(180px, 1fr) minmax(130px, 160px) auto;
  gap: 8px;
}

.taskExecCreateGridGoal {
  grid-template-columns: minmax(180px, 1fr) minmax(140px, 180px) auto;
}

.taskExecLayout {
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
}

.taskExecMap,
.taskExecDetail {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fffdf8;
  padding: 10px;
}

.taskExecColumns {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 8px;
}

.taskExecColumn {
  border: 2px dashed var(--line);
  border-radius: 10px;
  background: #fff;
  padding: 8px;
}

.taskExecColumnLabel {
  font-size: 0.72rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #35507c;
  font-weight: 700;
}

.taskExecColumnBody {
  margin-top: 6px;
  display: grid;
  gap: 6px;
}

.taskExecStep {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  text-align: left;
  color: inherit;
  padding: 8px;
  cursor: pointer;
}

.taskExecStepActive {
  border-color: var(--focus);
  box-shadow: inset 0 0 0 2px #2457d63d;
}

.taskExecStepCurrent {
  background: #eaf8ee;
}

.taskExecStepTitle {
  font-weight: 700;
  line-height: 1.2;
}

.taskExecStepDetailBody {
  display: grid;
  gap: 8px;
}

.taskExecLinksBlock {
  display: grid;
  gap: 4px;
}

.taskExecLinks {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.taskExecLogs {
  border-top: 2px dashed var(--line);
  padding-top: 8px;
}

.taskExecLogList {
  margin-top: 8px;
  display: grid;
  gap: 6px;
  max-height: 220px;
  overflow: auto;
}

.taskExecLogItem {
  border: 2px solid var(--line);
  border-radius: 8px;
  background: #fff;
  padding: 8px;
}

.taskExecLogContent {
  margin: 6px 0 0;
  white-space: pre-wrap;
}

.knowledgeBoard {
  display: grid;
  gap: 12px;
  background:
    radial-gradient(800px 200px at 5% -20%, #e2f5ff 0%, transparent 65%),
    radial-gradient(900px 220px at 100% -25%, #ffe9d6 0%, transparent 70%),
    var(--panel);
}

.knowledgeHero {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  align-items: flex-start;
}

.knowledgeHeroFilters {
  display: grid;
  grid-template-columns: minmax(180px, 220px) minmax(150px, 180px) minmax(120px, 140px);
  gap: 8px;
}

.knowledgeCreate {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 10px;
  display: grid;
  grid-template-columns: minmax(180px, 1.1fr) minmax(150px, 220px) minmax(150px, 220px) minmax(180px, 1fr) auto;
  gap: 8px;
}

.knowledgeCreateBody {
  grid-column: 1 / -2;
}

.knowledgeLayout {
  display: grid;
  grid-template-columns: 0.75fr 1.15fr 1.1fr;
  gap: 10px;
  align-items: start;
}

.knowledgeTopics,
.knowledgeListPanel,
.knowledgeDetail {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 10px;
}

.knowledgeTopics {
  display: grid;
  gap: 8px;
}

.knowledgeTopicBtn {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fffdf7;
  color: inherit;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 8px 10px;
  text-align: left;
  cursor: pointer;
}

.knowledgeTopicBtnActive {
  background: #eff5ff;
  border-color: var(--focus);
}

.knowledgeBulkBar {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 8px;
}

.knowledgeList {
  display: grid;
  gap: 8px;
  max-height: 66vh;
  overflow: auto;
  padding-right: 2px;
}

.knowledgeRow {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fff;
  padding: 9px;
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 8px;
  cursor: pointer;
  align-items: flex-start;
}

.knowledgeRowActive {
  box-shadow: inset 0 0 0 2px #2457d650;
}

.knowledgeRowMain {
  min-width: 0;
  display: grid;
  gap: 4px;
}

.knowledgeTitle {
  font-weight: 700;
  line-height: 1.2;
}

.knowledgeMeta {
  color: var(--muted);
  font-size: 0.8rem;
  display: grid;
  gap: 2px;
}

.knowledgeDetail {
  position: sticky;
  top: 8px;
}

.knowledgeDetailContent {
  display: grid;
  gap: 8px;
}

.knowledgeDetailTitle {
  font-size: 1rem;
  font-weight: 700;
}

.knowledgeBody {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fffdf8;
  padding: 10px;
  white-space: pre-wrap;
  line-height: 1.45;
  max-height: 40vh;
  overflow: auto;
}

.knowledgeSection {
  border-top: 2px dashed var(--line);
  padding-top: 8px;
}

.knowledgeEdit {
  border-top: 2px dashed var(--line);
  padding-top: 8px;
  display: grid;
  gap: 8px;
}

.ideasBoard {
  display: grid;
  gap: 12px;
  background:
    radial-gradient(760px 220px at 4% -16%, #e3f8eb 0%, transparent 64%),
    radial-gradient(880px 220px at 98% -20%, #e8ebff 0%, transparent 68%),
    var(--panel);
}

.ideasCreate {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 10px;
  display: grid;
  grid-template-columns: minmax(190px, 1fr) minmax(120px, 160px) minmax(160px, 220px) auto auto;
  gap: 8px;
}

.ideasCreateWide {
  grid-column: 1 / -1;
}

.ideasLayout {
  display: grid;
  grid-template-columns: 0.75fr 1.25fr;
  gap: 10px;
  align-items: start;
}

.ideasListPanel,
.ideasDetail,
.routesListPanel,
.routesDetail {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 10px;
}

.ideasList,
.routesList {
  margin-top: 8px;
  display: grid;
  gap: 8px;
  max-height: 62vh;
  overflow: auto;
}

.ideasRow,
.routesRow {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fffdf7;
  color: inherit;
  text-align: left;
  padding: 9px;
  cursor: pointer;
}

.ideasRowActive,
.routesRowActive {
  border-color: var(--focus);
  box-shadow: inset 0 0 0 2px #2457d645;
}

.ideasRowTitle,
.routesRowTitle {
  font-weight: 700;
  line-height: 1.2;
}

.ideasDetail {
  position: sticky;
  top: 8px;
  display: grid;
  gap: 8px;
}

.ideasDetailTitle {
  margin: 0;
  font-size: 1.04rem;
}

.ideasField {
  display: grid;
  gap: 4px;
  font-size: 0.84rem;
  color: var(--ink-soft);
}

.ideasTextBlock {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fffdf8;
  padding: 8px;
  min-height: 40px;
  white-space: pre-wrap;
}

.ideasActionRow {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.ideasPromote {
  border-top: 2px dashed var(--line);
  padding-top: 8px;
  display: grid;
  gap: 8px;
}

.ideasPromoteGrid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.routesBoard {
  display: grid;
  gap: 12px;
  background:
    radial-gradient(860px 220px at 5% -18%, #f0efe2 0%, transparent 66%),
    radial-gradient(900px 220px at 100% -20%, #dcefff 0%, transparent 70%),
    var(--panel);
}

.routesCreate {
  border: 2px solid var(--line);
  border-radius: 12px;
  background: #fff;
  padding: 10px;
  display: grid;
  grid-template-columns: minmax(180px, 1fr) minmax(180px, 1fr) minmax(120px, 150px) minmax(90px, 120px) minmax(160px, 220px) auto auto;
  gap: 8px;
}

.routesLayout {
  display: grid;
  grid-template-columns: 0.7fr 1.3fr;
  gap: 10px;
  align-items: start;
}

.routesDetail {
  position: sticky;
  top: 8px;
  display: grid;
  gap: 8px;
}

.routesMetaGrid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.routesNodeCreate {
  border-top: 2px dashed var(--line);
  padding-top: 8px;
  display: grid;
  gap: 8px;
}

.routesNodeCreateGrid {
  display: grid;
  grid-template-columns: minmax(100px, 140px) minmax(180px, 1fr) minmax(180px, 1fr) auto;
  gap: 8px;
}

.routesGraphBlock {
  border-top: 2px dashed var(--line);
  padding-top: 8px;
}

.routeGraphList {
  display: grid;
  gap: 8px;
}

.routeGraphNode {
  border: 2px solid var(--line);
  border-radius: 10px;
  background: #fffdf8;
  padding: 10px;
  display: grid;
  gap: 8px;
}

.routeGraphNodeHead {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  align-items: flex-start;
}

.routeGraphTitle {
  font-weight: 700;
  line-height: 1.2;
}

.routeGraphSection {
  display: grid;
  gap: 6px;
}

.routeGraphLabel {
  font-size: 0.78rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #35507c;
}

.routeGraphChips {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

@media (max-width: 1400px) {
  .taskCommandLayout {
    grid-template-columns: 260px 1fr;
  }

  .taskCommandLayoutManage {
    grid-template-columns: 260px 1fr;
  }

  .taskCommandDetail {
    grid-column: 1 / -1;
    position: static;
    max-height: none;
  }

  .taskStudioDrawer {
    width: min(420px, 98%);
  }

  .taskStudioDrawerInline {
    width: 100%;
  }
}

@media (max-width: 900px) {
  .shell {
    grid-template-columns: 1fr;
  }

  .rail {
    border-right: none;
    border-bottom: 2px solid var(--line);
  }

  .taskLayout {
    grid-template-columns: 1fr;
  }

  .taskCommandTop {
    flex-direction: column;
  }

  .taskCommandCreateBar,
  .taskCommandLayout {
    grid-template-columns: 1fr;
  }

  .taskCommandLayoutManage {
    grid-template-columns: 1fr;
  }

  .taskFilterPanelCommand,
  .taskCommandDetail {
    position: static;
    max-height: none;
  }

  .taskStudioHead {
    grid-template-columns: 1fr;
  }

  .taskStudioHeadActions {
    justify-content: flex-start;
  }

  .taskStudioGrid {
    grid-template-columns: 1fr;
  }

  .taskStudioWorkspace {
    min-height: 0;
  }

  .taskStudioDrawerMask {
    position: fixed;
    inset: 0;
  }

  .taskStudioDrawer {
    position: fixed;
    top: auto;
    right: 0;
    bottom: 0;
    left: 0;
    width: 100%;
    height: min(88vh, 820px);
    border-left: none;
    border-top: 2px solid var(--line);
    border-radius: 14px 14px 0 0;
    transform: translateY(104%);
  }

  .taskStudioDrawerOpen {
    transform: translateY(0);
  }

  .taskStudioDrawerInline {
    position: static;
    width: 100%;
    height: auto;
    border-top: 2px solid var(--line);
    border-radius: 12px;
    transform: none;
  }

  .taskStatusGroupList {
    max-height: none;
  }

  .taskCreateRow {
    grid-template-columns: 1fr;
  }

  .taskFilterGrid {
    grid-template-columns: 1fr;
  }

  .taskHero {
    flex-direction: column;
  }

  .taskDetailGrid {
    grid-template-columns: 1fr;
  }

  .taskDetailFormGrid {
    grid-template-columns: 1fr;
  }

  .taskDetailEditRow {
    grid-template-columns: 1fr;
  }

  .taskExecFlowBar {
    flex-direction: column;
    align-items: stretch;
  }

  .taskExecNodeStatusBar {
    grid-template-columns: 1fr;
  }

  .taskExecNodeStatusMain {
    grid-template-columns: 1fr;
  }

  .taskExecStartRow {
    grid-template-columns: 1fr;
  }

  .taskExecCreateGrid {
    grid-template-columns: 1fr;
  }

  .taskDagInlinePanel {
    width: 260px;
  }

  .taskExecLayout {
    grid-template-columns: 1fr;
  }

  .knowledgeHero {
    flex-direction: column;
  }

  .knowledgeHeroFilters {
    grid-template-columns: 1fr;
    width: 100%;
  }

  .knowledgeCreate {
    grid-template-columns: 1fr;
  }

  .knowledgeCreateBody {
    grid-column: auto;
  }

  .knowledgeLayout {
    grid-template-columns: 1fr;
  }

  .knowledgeDetail {
    position: static;
  }

  .changesInboxLayout {
    grid-template-columns: 1fr;
  }

  .changesInboxList {
    max-height: 320px;
  }

  .ideasCreate,
  .routesCreate {
    grid-template-columns: 1fr;
  }

  .ideasCreateWide {
    grid-column: auto;
  }

  .ideasLayout,
  .routesLayout {
    grid-template-columns: 1fr;
  }

  .ideasDetail,
  .routesDetail {
    position: static;
  }

  .ideasPromoteGrid,
  .routesMetaGrid,
  .routesNodeCreateGrid {
    grid-template-columns: 1fr;
  }
}
